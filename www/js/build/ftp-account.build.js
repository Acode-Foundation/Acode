(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ftp-account"],{

/***/ "./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\n\n//# sourceURL=webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js?");

/***/ }),

/***/ "./src/pages/ftp-accounts/decryptAccounts.js":
/*!***************************************************!*\
  !*** ./src/pages/ftp-accounts/decryptAccounts.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/helpers */ \"./src/lib/utils/helpers.js\");\n\n/**\n * \n * @param {Array<FTPAccount>} accounts \n */\n\nfunction decryptAccounts(accounts) {\n  var credentials = _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_0__[\"default\"].credentials;\n  var temp = [];\n  if (Array.isArray(accounts)) accounts.map(function (account) {\n    var name = account.name,\n        username = account.username,\n        password = account.password,\n        hostname = account.hostname,\n        port = account.port,\n        id = account.id,\n        security = account.security,\n        mode = account.mode,\n        path = account.path;\n    username = credentials.decrypt(username);\n    password = credentials.decrypt(password);\n    hostname = credentials.decrypt(hostname);\n    port = credentials.decrypt(port);\n    temp.push({\n      username: username,\n      password: password,\n      hostname: hostname,\n      port: port,\n      name: name ? name : \"\".concat(username, \"@\").concat(hostname),\n      id: id,\n      security: security,\n      mode: mode,\n      path: path\n    });\n    return account;\n  });\n  return temp;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (decryptAccounts);\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/decryptAccounts.js?");

/***/ }),

/***/ "./src/pages/ftp-accounts/ftp-accounts.hbs":
/*!*************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.hbs ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"main list\\\" id=\\\"ftp-accounts\\\">{{{list}}}</div>\");\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.hbs?");

/***/ }),

/***/ "./src/pages/ftp-accounts/ftp-accounts.include.js":
/*!********************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.include.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.js\");\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mustache__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/utils/helpers */ \"./src/lib/utils/helpers.js\");\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _ftp_accounts_hbs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ftp-accounts.hbs */ \"./src/pages/ftp-accounts/ftp-accounts.hbs\");\n/* harmony import */ var _list_hbs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./list.hbs */ \"./src/pages/ftp-accounts/list.hbs\");\n/* harmony import */ var _ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ftp-accounts.scss */ \"./src/pages/ftp-accounts/ftp-accounts.scss\");\n/* harmony import */ var _ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _components_searchbar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/searchbar */ \"./src/components/searchbar.js\");\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _lib_fileSystem_remoteFs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/fileSystem/remoteFs */ \"./src/lib/fileSystem/remoteFs.js\");\n/* harmony import */ var _lib_addFolder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../lib/addFolder */ \"./src/lib/addFolder.js\");\n/* harmony import */ var _decryptAccounts__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./decryptAccounts */ \"./src/pages/ftp-accounts/decryptAccounts.js\");\n/* harmony import */ var _lib_utils_Url__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../lib/utils/Url */ \"./src/lib/utils/Url.js\");\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction FTPAccountsInclude() {\n  var accounts = JSON.parse(localStorage.ftpaccounts || '[]');\n  var $search = html_tag_js__WEBPACK_IMPORTED_MODULE_2___default()('span', {\n    className: 'icon search',\n    attr: {\n      action: \"search\"\n    }\n  });\n  var $page = Object(_components_page__WEBPACK_IMPORTED_MODULE_5__[\"default\"])('FTP Accounts');\n  var credentials = _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_4__[\"default\"].credentials;\n  var $content = html_tag_js__WEBPACK_IMPORTED_MODULE_2___default.a.parse(mustache__WEBPACK_IMPORTED_MODULE_3___default.a.render(_ftp_accounts_hbs__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    list: mustache__WEBPACK_IMPORTED_MODULE_3___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      accounts: decryptAccounts()\n    })\n  }));\n  $content.addEventListener('click', handleClick);\n  $page.querySelector('header').append($search);\n\n  $search.onclick = function () {\n    Object(_components_searchbar__WEBPACK_IMPORTED_MODULE_9__[\"default\"])($page.querySelector('.list'));\n  };\n\n  $page.append($content);\n  app.appendChild($page);\n  actionStack.push({\n    id: 'repos',\n    action: $page.hide\n  });\n\n  $page.onhide = function () {\n    actionStack.remove('repos');\n  };\n  /**\n   * \n   * @param {Event} e \n   */\n\n\n  function handleClick(e) {\n    var $target = e.target;\n    if (!($target instanceof HTMLElement)) return;\n    var action = $target.getAttribute('action');\n    if (!action) return;\n\n    if (action === 'add-account') {\n      addAccount();\n    } else if (action === 'remove') {\n      var $parent = $target.parentElement;\n      var _id = $parent.id;\n\n      var _name = $parent.getAttribute('name');\n\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].confirm(strings.warning, strings[\"delete {name}\"].replace('{name}', _name)).then(function (res) {\n        if (!$parent || !_id) return;\n        remove(_id);\n      });\n    } else if (action === 'ftp-account' || action === \"edit\") {\n      if (action === \"edit\") $target = $target.parentElement;\n      /**@type {FTPAccount} */\n\n      var account = {};\n      account.username = $target.getAttribute(\"username\");\n      account.password = $target.getAttribute(\"password\");\n      account.hostname = $target.getAttribute(\"hostname\");\n      account.security = $target.getAttribute(\"security\");\n      account.port = $target.getAttribute(\"port\");\n      account.name = $target.getAttribute(\"name\");\n      account.mode = $target.getAttribute(\"mode\");\n      account.id = $target.id;\n\n      if (action === 'edit') {\n        addAccount(account);\n      } else {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = addedFolder[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var folder = _step.value;\n            if (folder.id && folder.id === id) return actionStack.pop();\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        account.username = account.username || null;\n        account.password = account.password || null;\n        addFTPFolder(account);\n      }\n    }\n  }\n  /**\n   * \n   * @param {FTPAccount} account \n   */\n\n\n  function addFTPFolder(account) {\n    var url = _lib_utils_Url__WEBPACK_IMPORTED_MODULE_14__[\"default\"].formate(_objectSpread({\n      protocol: \"ftp:\"\n    }, account, {\n      query: {\n        mode: account.mode,\n        security: account.security\n      }\n    }));\n    Object(_lib_addFolder__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(url, {\n      saveState: false,\n      reloadOnResume: false,\n      name: name,\n      id: id\n    });\n    actionStack.pop();\n  }\n  /**\n   * \n   * @param {FTPAccount} account \n   */\n\n\n  function addAccount(account) {\n    var username, password, hostname, name, port, id, security, mode;\n\n    if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(account) === \"object\") {\n      username = account.username;\n      password = account.password;\n      hostname = account.hostname;\n      name = account.name;\n      port = account.port;\n      id = account.id;\n      security = account.security;\n      mode = account.mode;\n    } else {\n      var _arguments = Array.prototype.slice.call(arguments);\n\n      username = _arguments[0];\n      password = _arguments[1];\n      hostname = _arguments[2];\n      name = _arguments[3];\n      port = _arguments[4];\n      id = _arguments[5];\n      security = _arguments[6];\n      mode = _arguments[7];\n    }\n\n    prompt(username, password, hostname, name, port, security, mode).then(function (values) {\n      var username = values.username,\n          password = values.password,\n          hostname = values.hostname,\n          port = values.port,\n          ftp = values.ftp,\n          ftps = values.ftps,\n          active = values.active,\n          passive = values.passive,\n          name = values.name;\n      var security = ftps ? \"ftps\" : \"ftp\";\n      var mode = active ? \"active\" : \"passive\";\n      var fs = Object(_lib_fileSystem_remoteFs__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(username, password, hostname, port, security, mode);\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loaderShow('', strings.loading + '...');\n      fs.homeDirectory().then(function (res) {\n        var path = res;\n\n        if (id) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = addedFolder[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var folder = _step2.value;\n\n              if (folder.id && folder.id === id) {\n                folder.remove();\n                addFTPFolder(username, password, hostname, port, security, mode, id, name);\n              }\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n\n          remove(id);\n        }\n\n        if (Array.isArray(accounts)) accounts.push({\n          username: credentials.encrypt(username),\n          password: credentials.encrypt(password),\n          hostname: credentials.encrypt(hostname),\n          port: credentials.encrypt(port),\n          id: id || _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_4__[\"default\"].uuid(),\n          security: security,\n          mode: mode,\n          name: name,\n          path: path\n        });\n        localStorage.setItem('ftpaccounts', JSON.stringify(accounts));\n        $content.innerHTML = mustache__WEBPACK_IMPORTED_MODULE_3___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          accounts: decryptAccounts()\n        });\n      })[\"catch\"](function (err) {\n        _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error(err).then(function () {\n          return addAccount(username, password, hostname, name, port, id, security, mode);\n        });\n        console.error(err);\n      })[\"finally\"](function () {\n        _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loaderHide();\n      });\n    });\n  }\n\n  function decryptAccounts() {\n    return Object(_decryptAccounts__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(accounts);\n  }\n\n  function remove(id) {\n    if (Array.isArray(accounts)) accounts = accounts.filter(function (account) {\n      return account.id !== id;\n    });\n    $content.innerHTML = mustache__WEBPACK_IMPORTED_MODULE_3___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      accounts: decryptAccounts()\n    });\n    localStorage.setItem('ftpaccounts', JSON.stringify(accounts));\n  }\n\n  function prompt(username, password, hostname, name, port, security, mode) {\n    port = port || 21;\n    security = security || \"ftp\";\n    mode = mode || \"passive\";\n    return _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].multiPrompt('FTP login', [{\n      id: \"name\",\n      placeholder: \"Name (optional)\",\n      type: \"text\",\n      value: name ? name : ''\n    }, {\n      id: \"username\",\n      placeholder: \"Username (optional)\",\n      type: \"text\",\n      value: username\n    }, {\n      id: \"password\",\n      placeholder: \"Password (optional)\",\n      type: \"password\",\n      value: password\n    }, {\n      id: \"hostname\",\n      placeholder: \"Hostname\",\n      type: \"text\",\n      required: true,\n      value: hostname\n    }, [\"Security type: \", {\n      id: \"ftp\",\n      placeholder: \"FTP\",\n      name: \"type\",\n      type: \"radio\",\n      value: security === \"ftp\" ? true : false\n    }, {\n      id: \"ftps\",\n      placeholder: \"FTPS\",\n      name: \"type\",\n      type: \"radio\",\n      value: security === \"ftps\" ? true : false\n    }], [\"Connection mode: \", {\n      id: \"active\",\n      placeholder: \"Active\",\n      name: \"mode\",\n      type: \"radio\",\n      value: mode === \"active\" ? true : false\n    }, {\n      id: \"passive\",\n      placeholder: \"Passive\",\n      name: \"mode\",\n      type: \"radio\",\n      value: mode === \"passive\" ? true : false\n    }], {\n      id: \"port\",\n      placeholder: \"Port (optional)\",\n      type: \"number\",\n      value: port\n    }]);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FTPAccountsInclude);\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.include.js?");

/***/ }),

/***/ "./src/pages/ftp-accounts/ftp-accounts.scss":
/*!**************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.scss ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.scss?");

/***/ }),

/***/ "./src/pages/ftp-accounts/list.hbs":
/*!*****************************************!*\
  !*** ./src/pages/ftp-accounts/list.hbs ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"{{#accounts}}\\n<div class=\\\"list-item\\\" action=\\\"ftp-account\\\" name=\\\"{{name}}\\\" security=\\\"{{security}}\\\" mode=\\\"{{mode}}\\\" path=\\\"{{path}}\\\"\\n  username=\\\"{{username}}\\\" password=\\\"{{password}}\\\" hostname=\\\"{{hostname}}\\\" port=\\\"{{port}}\\\" id=\\\"{{id}}\\\">\\n  <span class=\\\"icon person\\\"></span>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"text\\\">\\n      <span>{{name}}</span>\\n    </div>\\n  </div>\\n  <span class=\\\"icon edit\\\" action=\\\"edit\\\"></span>\\n  <span class=\\\"icon clearclose\\\" action=\\\"remove\\\"></span>\\n</div>\\n{{/accounts}}\\n<div class=\\\"list-item\\\" action=\\\"add-account\\\">\\n  <span class=\\\"icon add\\\"></span>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"text\\\">\\n      <span>Add FTP account</span>\\n    </div>\\n  </div>\\n</div>\");\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/list.hbs?");

/***/ })

}]);
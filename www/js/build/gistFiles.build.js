(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["gistFiles"],{

/***/ "./src/pages/gistFiles/gistFiles.hbs":
/*!*******************************************!*\
  !*** ./src/pages/gistFiles/gistFiles.hbs ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"gistFiles\\\" empty-msg=\\\"{{msg}}\\\" class=\\\"main list\\\">{{#files}}\\n  <div class=\\\"list-item\\\" action=\\\"file\\\" filename=\\\"{{filename}}\\\">\\n    <span class=\\\"icon {{type}}\\\"></span>\\n    <div class=\\\"container\\\">\\n      <div class=\\\"text\\\">\\n        <span>{{filename}}</span>\\n      </div>\\n    </div>\\n    <span class=\\\"icon delete\\\" action=\\\"delete-file\\\"></span>\\n  </div>\\n  {{/files}}</div>\");\n\n//# sourceURL=webpack:///./src/pages/gistFiles/gistFiles.hbs?");

/***/ }),

/***/ "./src/pages/gistFiles/gistFiles.include.js":
/*!**************************************************!*\
  !*** ./src/pages/gistFiles/gistFiles.include.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.js\");\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mustache__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _gistFiles_hbs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gistFiles.hbs */ \"./src/pages/gistFiles/gistFiles.hbs\");\n/* harmony import */ var _menu_hbs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./menu.hbs */ \"./src/pages/gistFiles/menu.hbs\");\n/* harmony import */ var _gistFiles_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gistFiles.scss */ \"./src/pages/gistFiles/gistFiles.scss\");\n/* harmony import */ var _gistFiles_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_gistFiles_scss__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../lib/utils/helpers */ \"./src/lib/utils/helpers.js\");\n/* harmony import */ var _components_contextMenu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../components/contextMenu */ \"./src/components/contextMenu.js\");\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _gists_gists__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../gists/gists */ \"./src/pages/gists/gists.js\");\n/* harmony import */ var _lib_git__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/git */ \"./src/lib/git.js\");\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../lib/constants */ \"./src/lib/constants.js\");\n/* harmony import */ var _components_searchbar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../components/searchbar */ \"./src/components/searchbar.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * \n * @param {Gist} gist \n */\n\nfunction GistFilesInclude(gist) {\n  var fileNames = Object.keys(gist.files);\n  var $page = Object(_components_page__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(fileNames[0] || 'Gist:' + gist.id);\n  var views = {\n    files: function files() {\n      var files = [];\n      Object.values(gist.files).map(function (file) {\n        files.push({\n          filename: file.filename,\n          type: _lib_utils_helpers__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getIconForFile(file.filename)\n        });\n      });\n      return files;\n    },\n    msg: strings['empty folder message']\n  };\n  var $content = html_tag_js__WEBPACK_IMPORTED_MODULE_1___default.a.parse(mustache__WEBPACK_IMPORTED_MODULE_2___default.a.render(_gistFiles_hbs__WEBPACK_IMPORTED_MODULE_3__[\"default\"], views));\n  var $menuToggler = html_tag_js__WEBPACK_IMPORTED_MODULE_1___default()('span', {\n    className: 'icon more_vert',\n    attr: {\n      action: 'toggle-menu'\n    }\n  });\n  var $cm = Object(_components_contextMenu__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(mustache__WEBPACK_IMPORTED_MODULE_2___default.a.render(_menu_hbs__WEBPACK_IMPORTED_MODULE_4__[\"default\"], strings), {\n    top: '8px',\n    right: '8px',\n    toggle: $menuToggler,\n    transformOrigin: 'top right'\n  });\n  var $search = html_tag_js__WEBPACK_IMPORTED_MODULE_1___default()('span', {\n    className: 'icon search',\n    attr: {\n      action: \"search\"\n    }\n  });\n  $content.on('click', handleClick);\n  $cm.on('click', handleClick);\n  $page.append($content);\n  $page.querySelector('header').append($search, $menuToggler);\n  app.appendChild($page);\n\n  $search.onclick = function () {\n    Object(_components_searchbar__WEBPACK_IMPORTED_MODULE_13__[\"default\"])($page.querySelector('.list'));\n  };\n\n  actionStack.push({\n    id: 'gistFiles',\n    action: $page.hide\n  });\n\n  $page.onhide = function () {\n    actionStack.remove('gistFiles');\n  };\n  /**\n   * \n   * @param {MouseEvent} e \n   */\n\n\n  function handleClick(e) {\n    var $el = e.target;\n    var action = $el.getAttribute('action');\n    if (!action) return;\n    if (['create', 'delete-gist'].includes(action)) $cm.hide();\n\n    switch (action) {\n      case 'file':\n        file();\n        break;\n\n      case 'share':\n        share();\n        break;\n\n      case 'create':\n        addFile();\n        break;\n\n      case 'delete-gist':\n        deleteGist();\n        break;\n\n      case 'delete-file':\n        deleteFile();\n        break;\n    }\n\n    function addFile() {\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].prompt(strings['enter file name'], strings['new file'], 'text', {\n        match: _lib_constants__WEBPACK_IMPORTED_MODULE_12__[\"default\"].FILE_NAME_REGEX,\n        required: true\n      }).then(function (name) {\n        gist.addFile(name);\n        editorManager.addNewFile(name, {\n          type: 'gist',\n          filename: name,\n          isUnsaved: false,\n          record: gist,\n          render: true\n        });\n        actionStack.pop();\n        actionStack.pop();\n        actionStack.pop();\n      });\n    }\n\n    function deleteFile() {\n      var filename = $el.parentElement.getAttribute('filename');\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].confirm(strings.warning, strings['delete {name}'].replace('{name}', filename)).then(function () {\n        if (filename) {\n          _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].loader.create(filename, strings.loading + '...');\n          gist.removeFile(filename).then(function () {\n            $el.parentElement.remove();\n            window.plugins.toast.showShortBottom(strings.success);\n          })[\"catch\"](function (err) {\n            if (err) _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].alert(strings.error, err.toString());\n          })[\"finally\"](function () {\n            _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].loader.destroy();\n          });\n        }\n      });\n    }\n\n    function deleteGist() {\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].confirm(strings.warning, strings['delete {name}'].replace('{name}', 'Gist: ' + gist.id)).then(function () {\n        var Gist = _lib_git__WEBPACK_IMPORTED_MODULE_11__[\"default\"].GitHub().getGist(gist.id);\n        _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].loader.create('', strings.loading + '...');\n        Gist[\"delete\"]().then(function (res) {\n          if (res.status === 204) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = editorManager.files[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var _file = _step.value;\n                if (_file.type === 'gist' && _file.record.id === gist.id) editorManager.removeFile(_file, true);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                  _iterator[\"return\"]();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            window.plugins.toast.showShortBottom(strings.success);\n            actionStack.pop();\n            actionStack.pop();\n            Object(_gists_gists__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(function (gists) {\n              var index;\n              var _iteratorNormalCompletion2 = true;\n              var _didIteratorError2 = false;\n              var _iteratorError2 = undefined;\n\n              try {\n                for (var _iterator2 = gists.entries()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                  var _step2$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step2.value, 2),\n                      i = _step2$value[0],\n                      g = _step2$value[1];\n\n                  if (g.id === gist.id) {\n                    index = i;\n                    break;\n                  }\n                }\n              } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                    _iterator2[\"return\"]();\n                  }\n                } finally {\n                  if (_didIteratorError2) {\n                    throw _iteratorError2;\n                  }\n                }\n              }\n\n              if (index !== undefined) {\n                gists.splice(index, 1);\n              }\n\n              return gists;\n            });\n          }\n        })[\"catch\"](function (err) {\n          if (err) {\n            console.log(err);\n            _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].alert(strings.error, err.toString());\n          }\n        })[\"finally\"](function () {\n          _components_dialogs__WEBPACK_IMPORTED_MODULE_9__[\"default\"].loader.destroy();\n        });\n      });\n    }\n\n    function share() {\n      var filename = $el.parentElement.getAttribute('filename');\n      console.log(filename);\n    }\n\n    function file() {\n      var filename = $el.getAttribute('filename');\n      editorManager.addNewFile(filename, {\n        type: \"gist\",\n        text: gist.files[filename].content,\n        isUnsaved: false,\n        record: gist,\n        render: true\n      });\n      actionStack.pop();\n      actionStack.pop();\n      actionStack.pop();\n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GistFilesInclude);\n\n//# sourceURL=webpack:///./src/pages/gistFiles/gistFiles.include.js?");

/***/ }),

/***/ "./src/pages/gistFiles/gistFiles.scss":
/*!********************************************!*\
  !*** ./src/pages/gistFiles/gistFiles.scss ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/pages/gistFiles/gistFiles.scss?");

/***/ }),

/***/ "./src/pages/gistFiles/menu.hbs":
/*!**************************************!*\
  !*** ./src/pages/gistFiles/menu.hbs ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<li action=\\\"create\\\">\\n  <span class=\\\"text\\\">{{new file}}</span>\\n  <span class=\\\"icon file-control document-add\\\"></span>\\n</li>\\n<li action=\\\"delete-gist\\\">\\n  <span class=\\\"text\\\">Delete gist</span>\\n  <span class=\\\"icon delete\\\"></span>\\n</li>\");\n\n//# sourceURL=webpack:///./src/pages/gistFiles/menu.hbs?");

/***/ })

}]);